---
- name: Make ec2.py and private key executable
  file: 
    path: "{{item}}"
    mode: 4000
  with_items:
    - ec2_py_path
    - cluster.ssh_private_key

#  list out dynamic inventory
- include: roles/common/tasks/command_log/main.yml
  vars:
    module_command_array:
      - {module_command: "inventory/ec2.py --list", module_command_aim: "List out dynamic inventory"}

- name: Insert {{module_description}} into inventory
  lineinfile:
    path: "{{inventory_file}}"
    line: "{{module_line}}"
    state: present
    